
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Graph data Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../text/analysis.html" />
    
    
    <link rel="prev" href="../data_formats_and_sources/sql_integration.html" />
    

    <script src="../turi/js/jquery/jquery-2.1.3.min.js"></script>
    <script src="../turi/js/d3/d3.min.js"></script>
    <script src="../supervised-learning/images/random-utils.js"></script>
    <script src="../supervised-learning/images/plotting-utils.js"></script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../sframe/">
            
                <a href="../sframe/">
            
                    
                    Working with data
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../sframe/tabular-data.html">
            
                <a href="../sframe/tabular-data.html">
            
                    
                    Tabular data
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../sframe/sframe-intro.html">
            
                <a href="../sframe/sframe-intro.html">
            
                    
                    Loading and Saving
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../sframe/data-manipulation.html">
            
                <a href="../sframe/data-manipulation.html">
            
                    
                    Data Manipulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../data_formats_and_sources/sql_integration.html">
            
                <a href="../data_formats_and_sources/sql_integration.html">
            
                    
                    SQL Databases
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.2.2" data-path="sgraph.html">
            
                <a href="sgraph.html">
            
                    
                    Graph data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../text/analysis.html">
            
                <a href="../text/analysis.html">
            
                    
                    Text data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../vis/">
            
                <a href="../vis/">
            
                    
                    Visualization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../vis/gallery.html">
            
                <a href="../vis/gallery.html">
            
                    
                    Example Gallery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../vis/use_cases.html">
            
                <a href="../vis/use_cases.html">
            
                    
                    Sample Use Cases
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../applications/">
            
                <a href="../applications/">
            
                    
                    Task focused toolkits
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../recommender/">
            
                <a href="../recommender/">
            
                    
                    Recommender systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../recommender/using-trained-models.html">
            
                <a href="../recommender/using-trained-models.html">
            
                    
                    Using models
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../recommender/choosing-a-model.html">
            
                <a href="../recommender/choosing-a-model.html">
            
                    
                    Choosing a model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../recommender/coreml-deployment.html">
            
                <a href="../recommender/coreml-deployment.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../image_classifier/">
            
                <a href="../image_classifier/">
            
                    
                    Image classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../image_classifier/advanced-usage.html">
            
                <a href="../image_classifier/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../image_classifier/how-it-works.html">
            
                <a href="../image_classifier/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../image_classifier/export-coreml.html">
            
                <a href="../image_classifier/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../drawing_classifier/">
            
                <a href="../drawing_classifier/">
            
                    
                    Drawing Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../drawing_classifier/how-it-works.html">
            
                <a href="../drawing_classifier/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../drawing_classifier/data-preparation.html">
            
                <a href="../drawing_classifier/data-preparation.html">
            
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../drawing_classifier/export-coreml.html">
            
                <a href="../drawing_classifier/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../drawing_classifier/advanced-usage.html">
            
                <a href="../drawing_classifier/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../sound_classifier/">
            
                <a href="../sound_classifier/">
            
                    
                    Sound Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../sound_classifier/how-it-works.html">
            
                <a href="../sound_classifier/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../sound_classifier/advanced-usage.html">
            
                <a href="../sound_classifier/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../sound_classifier/export-coreml.html">
            
                <a href="../sound_classifier/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../image_similarity/">
            
                <a href="../image_similarity/">
            
                    
                    Image similarity
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../image_similarity/export-coreml.html">
            
                <a href="../image_similarity/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../object_detection/">
            
                <a href="../object_detection/">
            
                    
                    Object detection
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.1" data-path="../object_detection/data-preparation.html">
            
                <a href="../object_detection/data-preparation.html">
            
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.2" data-path="../object_detection/advanced-usage.html">
            
                <a href="../object_detection/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.3" data-path="../object_detection/export-coreml.html">
            
                <a href="../object_detection/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.4" data-path="../object_detection/how-it-works.html">
            
                <a href="../object_detection/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../style_transfer/">
            
                <a href="../style_transfer/">
            
                    
                    Style transfer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.7.1" data-path="../style_transfer/how-it-works.html">
            
                <a href="../style_transfer/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7.2" data-path="../style_transfer/export-coreml.html">
            
                <a href="../style_transfer/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../activity_classifier/">
            
                <a href="../activity_classifier/">
            
                    
                    Activity classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.8.1" data-path="../activity_classifier/data-preparation.html">
            
                <a href="../activity_classifier/data-preparation.html">
            
                    
                    Data Preparation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8.2" data-path="../activity_classifier/advanced-usage.html">
            
                <a href="../activity_classifier/advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8.3" data-path="../activity_classifier/export_coreml.html">
            
                <a href="../activity_classifier/export_coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8.4" data-path="../activity_classifier/how-it-works.html">
            
                <a href="../activity_classifier/how-it-works.html">
            
                    
                    How it works
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../text_classifier/">
            
                <a href="../text_classifier/">
            
                    
                    Text classifier
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../modeling-data/">
            
                <a href="../modeling-data/">
            
                    
                    Machine learning essentials
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../supervised-learning/classifier.html">
            
                <a href="../supervised-learning/classifier.html">
            
                    
                    Classification
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../supervised-learning/boosted_trees_classifier.html">
            
                <a href="../supervised-learning/boosted_trees_classifier.html">
            
                    
                    Boosted Trees Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../supervised-learning/decision_tree_classifier.html">
            
                <a href="../supervised-learning/decision_tree_classifier.html">
            
                    
                    Decision Tree Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../supervised-learning/logistic-regression.html">
            
                <a href="../supervised-learning/logistic-regression.html">
            
                    
                    Logistic Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="../supervised-learning/knn_classifier.html">
            
                <a href="../supervised-learning/knn_classifier.html">
            
                    
                    Nearest Neighbor Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.5" data-path="../supervised-learning/random_forest_classifier.html">
            
                <a href="../supervised-learning/random_forest_classifier.html">
            
                    
                    Random Forest Classifier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.6" data-path="../supervised-learning/svm.html">
            
                <a href="../supervised-learning/svm.html">
            
                    
                    SVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.7" data-path="../supervised-learning/export-coreml.html">
            
                <a href="../supervised-learning/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../clustering/">
            
                <a href="../clustering/">
            
                    
                    Clustering
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../clustering/kmeans.html">
            
                <a href="../clustering/kmeans.html">
            
                    
                    KMeans
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../clustering/dbscan.html">
            
                <a href="../clustering/dbscan.html">
            
                    
                    DBSCAN
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../graph_analytics/">
            
                <a href="../graph_analytics/">
            
                    
                    Graph analytics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../nearest_neighbors/nearest_neighbors.html">
            
                <a href="../nearest_neighbors/nearest_neighbors.html">
            
                    
                    Nearest neighbors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../supervised-learning/regression.html">
            
                <a href="../supervised-learning/regression.html">
            
                    
                    Regression
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="../supervised-learning/boosted_trees_regression.html">
            
                <a href="../supervised-learning/boosted_trees_regression.html">
            
                    
                    Boosted Trees Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.2" data-path="../supervised-learning/decision_tree_regression.html">
            
                <a href="../supervised-learning/decision_tree_regression.html">
            
                    
                    Decision Tree Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.3" data-path="../supervised-learning/linear-regression.html">
            
                <a href="../supervised-learning/linear-regression.html">
            
                    
                    Linear Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.4" data-path="../supervised-learning/random_forest_regression.html">
            
                <a href="../supervised-learning/random_forest_regression.html">
            
                    
                    Random Forest Regression
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.5" data-path="../supervised-learning/export-coreml.html">
            
                <a href="../supervised-learning/export-coreml.html">
            
                    
                    Deployment to Core ML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../text/">
            
                <a href="../text/">
            
                    
                    Text analysis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../evaluation/">
            
                <a href="../evaluation/">
            
                    
                    Evaluating models
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../evaluation/regression.html">
            
                <a href="../evaluation/regression.html">
            
                    
                    Regression metrics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../evaluation/classification.html">
            
                <a href="../evaluation/classification.html">
            
                    
                    Classification metrics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../conclusion.html">
            
                <a href="../conclusion.html">
            
                    
                    Additional Resources
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../cpp.html">
            
                <a href="../cpp.html">
            
                    
                    C++ API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../datasets.html">
            
                <a href="../datasets.html">
            
                    
                    Dataset Disclaimer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Graph data</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="working-with-graphs"><a name="working-with-graphs" class="plugin-anchor" href="#working-with-graphs"><i class="fa fa-link" aria-hidden="true"></i></a>Working with Graphs</h1><p>Graphs allow us to understand complex networks by focusing on
relationships between pairs of items. Each item is represented by a
<em>vertex</em> in the graph, and relationships between items are represented
by <em>edges</em>.</p><p>To facilitate graph-oriented data analysis, Turi Create offers a
<a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.SGraph.html" target="_blank">SGraph</a>
object, a scalable graph data structure backed by SFrames.  In this
chapter, we show that SGraphs allow arbitrary dictionary attributes on
vertices and edges, flexible vertex and edge query functions, and
seamless transformation to and from SFrames.</p><h4 id="creating-an-sgraph"><a name="creating-an-sgraph" class="plugin-anchor" href="#creating-an-sgraph"><i class="fa fa-link" aria-hidden="true"></i></a>Creating an SGraph</h4><p>There are several ways to create an SGraph. The simplest is to start
with an empty graph, then add vertices and edges in the form of lists of
turicreate.Vertex and turicreate.Edge objects. SGraphs are structurally
immutable; in the following snippet, <code>add_vertices</code> and <code>add_edges</code> both
return a new graph.</p><pre><code class="lang-python"><span class="hljs-keyword">from</span> turicreate <span class="hljs-keyword">import</span> SGraph, Vertex, Edge
g = SGraph()
verts = [Vertex(<span class="hljs-number">0</span>, attr={<span class="hljs-string">&apos;breed&apos;</span>: <span class="hljs-string">&apos;labrador&apos;</span>}),
         Vertex(<span class="hljs-number">1</span>, attr={<span class="hljs-string">&apos;breed&apos;</span>: <span class="hljs-string">&apos;labrador&apos;</span>}),
         Vertex(<span class="hljs-number">2</span>, attr={<span class="hljs-string">&apos;breed&apos;</span>: <span class="hljs-string">&apos;vizsla&apos;</span>})]
g = g.add_vertices(verts)
g = g.add_edges(Edge(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
<span class="hljs-keyword">print</span> g</code></pre>
<pre><code class="lang-no-highlight">SGraph({&apos;num_edges&apos;: 1, &apos;num_vertices&apos;: 3})
Vertex Fields:[&apos;__id&apos;, &apos;breed&apos;]
Edge Fields:[&apos;__src_id&apos;, &apos;__dst_id&apos;]</code></pre>
<p>We can chain these steps together to make a new graph in a single line.</p><pre><code class="lang-python">g = SGraph().add_vertices([Vertex(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">10</span>)]).add_edges(
    [Edge(i, i+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">9</span>)])</code></pre>
<p>SGraphs can also be created from an edge list stored in an SFrame. Vertices are
added to the graph automatically based on the edge list, and columns of the
SFrame not used as source or destination vertex IDs are assumed to be edge
attributes. Suppose we import a dataset of James Bond characters to
an SFrame, then build the graph.</p><pre><code class="lang-python"><span class="hljs-keyword">from</span> turicreate <span class="hljs-keyword">import</span> SFrame
edge_data = SFrame.read_csv(<span class="hljs-string">&apos;bond_edges.csv&apos;</span>)

g = SGraph()
g = g.add_edges(edge_data, src_field=<span class="hljs-string">&apos;src&apos;</span>, dst_field=<span class="hljs-string">&apos;dst&apos;</span>)
print(g)</code></pre>
<pre><code class="lang-no-highlight">SGraph({&apos;num_edges&apos;: 20, &apos;num_vertices&apos;: 10})</code></pre>
<p>The SGraph constructor also accepts vertex and edge SFrames directly. We can
construct the same James Bond graph with the following two lines:</p><pre><code class="lang-python">vertex_data = SFrame.read_csv(<span class="hljs-string">&apos;bond_vertices.csv&apos;</span>)

g = SGraph(vertices=vertex_data, edges=edge_data, vid_field=<span class="hljs-string">&apos;name&apos;</span>,
           src_field=<span class="hljs-string">&apos;src&apos;</span>, dst_field=<span class="hljs-string">&apos;dst&apos;</span>)</code></pre>
<p>Finally, an SGraph can be created directly from a file, either local or
remote, using the
<a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.load_sgraph.html" target="_blank">turicreate.load_sgraph()</a>
method. Loading a graph with this method works with both the native
binary save format and a variety of text formats. In the following
example we save the SGraph in binary format to a new folder called
&quot;james_bond&quot;, then re-load it under a different name.</p><pre><code class="lang-python">g.save(<span class="hljs-string">&apos;james_bond.sgraph&apos;</span>)
new_graph = turicreate.load_sgraph(<span class="hljs-string">&apos;james_bond.sgraph&apos;</span>)</code></pre>
<h4 id="inspecting-sgraphs"><a name="inspecting-sgraphs" class="plugin-anchor" href="#inspecting-sgraphs"><i class="fa fa-link" aria-hidden="true"></i></a>Inspecting SGraphs</h4><p>Graphs can be explored with <code>SGraph.summary</code>---which prints the number of
vertices and edges---or by retrieving and plotting subsets of edges and
vertices.</p><pre><code class="lang-python">print(g.summary())</code></pre>
<pre><code class="lang-no-highlight">{&apos;num_edges&apos;: 20, &apos;num_vertices&apos;: 10}</code></pre>
<p>To retrieve the contents of an SGraph, the <code>get_vertices</code> and <code>get_edges</code>
methods return SFrames. These functions can filter edges and vertices based on
vertex IDs or attributes. Omitting IDs and attributes returns all vertices or
edges.</p><pre><code class="lang-python">sub_verts = g.get_vertices(ids=[<span class="hljs-string">&apos;James Bond&apos;</span>])
print(sub_verts)</code></pre>
<pre><code class="lang-no-highlight">+------------+--------+-----------------+---------+
|    __id    | gender | license_to_kill | villain |
+------------+--------+-----------------+---------+
| James Bond |   M    |        1        |    0    |
+------------+--------+-----------------+---------+
[1 rows x 4 columns]</code></pre>
<pre><code class="lang-python">sub_edges = g.get_edges(fields={<span class="hljs-string">&apos;relation&apos;</span>: <span class="hljs-string">&apos;worksfor&apos;</span>})
print(sub_edges)</code></pre>
<pre><code class="lang-no-highlight">+---------------+-------------+----------+
|    __src_id   |   __dst_id  | relation |
+---------------+-------------+----------+
|       M       |  Moneypenny | worksfor |
|       M       |  James Bond | worksfor |
|       M       |      Q      | worksfor |
| Elliot Carver | Henry Gupta | worksfor |
| Elliot Carver |  Gotz Otto  | worksfor |
+---------------+-------------+----------+
[5 rows x 3 columns]</code></pre>
<p>The
<a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.SGraph.get_neighborhood.html#turicreate.SGraph.get_neighborhood" target="_blank">get_neighborhood</a>
method provides a convenient way to retrieve the subset of a graph near
a set of target vertices, also known as the <em>egocentric neighborhood</em> of
the target vertices. The <code>radius</code> of the neighborhood is the maximum
length of a path between any of the targets and a neighborhood vertex.
If <code>full_subgraph</code> is true, then edges between neighborhood vertices are
included even if the edges are not on direct paths between a target and
a neighbor.</p><pre><code class="lang-python">targets = [<span class="hljs-string">&apos;James Bond&apos;</span>, <span class="hljs-string">&apos;Moneypenny&apos;</span>]
subgraph = g.get_neighborhood(ids=targets, radius=<span class="hljs-number">1</span>, full_subgraph=<span class="hljs-keyword">True</span>)
print(subgraph)</code></pre>
<pre><code class="lang-no-highlight">SGraph({&apos;num_edges&apos;: 15, &apos;num_vertices&apos;: 8})</code></pre>
<h4 id="modifying-sgraphs"><a name="modifying-sgraphs" class="plugin-anchor" href="#modifying-sgraphs"><i class="fa fa-link" aria-hidden="true"></i></a>Modifying SGraphs</h4><p>SGraphs are <em>structurally immutable</em>, but the data stored on vertices and edges
can be mutated using two special SGraph properties. <code>SGraph.vertices</code> and
<code>SGraph.edges</code> are SFrames containing the vertex and edge data, respectively.
The following examples show the difference between the special graph-related
SFrames and normal SFrames. First, note that the following lines both produce
the same effect.</p><pre><code class="lang-python">g.edges.print_rows(<span class="hljs-number">5</span>)
g.get_edges().print_rows(<span class="hljs-number">5</span>)</code></pre>
<pre><code class="lang-no-highlight">+----------------+----------------+------------+
|    __src_id    |    __dst_id    |  relation  |
+----------------+----------------+------------+
|   Moneypenny   |       M        | managed_by |
| Inga Bergstorm |   James Bond   |   friend   |
|   Moneypenny   |       Q        | colleague  |
|  Henry Gupta   | Elliot Carver  | killed_by  |
|   James Bond   | Inga Bergstorm |   friend   |
+----------------+----------------+------------+
[5 rows x 3 columns]</code></pre>
<p>The difference is that the return value of <code>g.get_edges()</code> is a normal SFrame
independent from <code>g</code>, whereas <code>g.edges</code> is bound to <code>g</code>. We can modify the edge
data using this special edge SFrame. The next snippet mutates the relation
attribute on the edges of <code>g</code>. In particular, it extracts the first letter and
converts it to upper case.</p><pre><code class="lang-python">g.edges[<span class="hljs-string">&apos;relation&apos;</span>] = g.edges[<span class="hljs-string">&apos;relation&apos;</span>].apply(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>].upper())
g.get_edges().print_rows(<span class="hljs-number">5</span>)</code></pre>
<pre><code class="lang-no-highlight">+----------------+----------------+----------+
|    __src_id    |    __dst_id    | relation |
+----------------+----------------+----------+
|   Moneypenny   |       M        |    M     |
| Inga Bergstorm |   James Bond   |    F     |
|   Moneypenny   |       Q        |    C     |
|  Henry Gupta   | Elliot Carver  |    K     |
|   James Bond   | Inga Bergstorm |    F     |
|      ...       |      ...       |   ...    |
+----------------+----------------+----------+
[20 rows x 3 columns]</code></pre>
<p>On the other hand, the following code does not mutate the relation attribute on
the edges of <code>g</code>. If it had a permanent effect, the relation field would be
converted a lower case letter, but in the result it clearly remains upper case.</p><pre><code class="lang-python">e = g.get_edges()  <span class="hljs-comment"># e is a normal SFrame independent of g.</span>
e[<span class="hljs-string">&apos;relation&apos;</span>] = e[<span class="hljs-string">&apos;relation&apos;</span>].apply(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>].lower())
g.get_edges().print_rows(<span class="hljs-number">5</span>)</code></pre>
<pre><code class="lang-no-highlight">+----------------+----------------+----------+
|    __src_id    |    __dst_id    | relation |
+----------------+----------------+----------+
|   Moneypenny   |       M        |    M     |
| Inga Bergstorm |   James Bond   |    F     |
|   Moneypenny   |       Q        |    C     |
|  Henry Gupta   | Elliot Carver  |    K     |
|   James Bond   | Inga Bergstorm |    F     |
|      ...       |      ...       |   ...    |
+----------------+----------------+----------+
[20 rows x 3 columns]</code></pre>
<p>Calling a method like <code>head()</code>, <code>tail()</code>, or <code>append()</code> on a special
graph-related SFrame also results in a new instance of a regular SFrame. For
example, the following code does not mutate <code>g</code>.</p><pre><code class="lang-python">e = g.edges.head(<span class="hljs-number">5</span>)
e[<span class="hljs-string">&apos;is_friend&apos;</span>] = e[<span class="hljs-string">&apos;relation&apos;</span>].apply(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>] == <span class="hljs-string">&apos;F&apos;</span>)</code></pre>
<p>Another important difference of these two special SFrames is that the <code>__id</code>,
<code>__src_id</code>, and <code>__dst_id</code> fields are not mutable because changing them would
change the structure of the graph and SGraph is <em>structurally immutable</em>.</p><p>Otherwise, <code>g.vertices</code> and <code>g.edges</code> act like normal SFrames, which makes
modifying graph data very easy. For example, adding (removing) an edge
field is the same as adding (removing) a column to (from) an SFrame:</p><pre><code class="lang-python">g.edges[<span class="hljs-string">&apos;weight&apos;</span>] = <span class="hljs-number">1.0</span>
<span class="hljs-keyword">del</span> g.edges[<span class="hljs-string">&apos;weight&apos;</span>]</code></pre>
<p>The
<a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.SGraph.triple_apply.html#turicreate.SGraph.triple_apply" target="_blank">triple_apply</a>
method provides a particularly powerful way to modify SGraph
vertex and edge attributes. <code>triple_apply</code> applies a user-defined function to
all edges asynchronously, allowing you to do a computation that modifies edge
data based on vertex data, or vice versa. A wide range of
methods---<a href="http://en.wikipedia.org/wiki/Shortest_path_problem" target="_blank">single-source shortest
path</a> and <a href="http://en.wikipedia.org/wiki/PageRank" target="_blank">weighted
PageRank</a>, for example---can be expressed
very simply with this primitive.</p><p>The first step is to define a function that takes as input an edge in the graph,
together with the incident source and destination vertices. This <em>triple apply
function</em> modifies vertex and edge fields in some way, then returns the modified
(source vertex, edge, destination vertex) triple. In this example, we compute
the <em>degree</em> of each vertex in the James Bond graph, which is the number of
edges that touch each vertex.</p><pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">increment_degree</span><span class="hljs-params">(src, edge, dst)</span>:</span>
    src[<span class="hljs-string">&apos;degree&apos;</span>] += <span class="hljs-number">1</span>
    dst[<span class="hljs-string">&apos;degree&apos;</span>] += <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> (src, edge, dst)</code></pre>
<p>The next step is to create a new field in our SGraph&apos;s vertex data to hold the
answer.</p><pre><code class="lang-python">g.vertices[<span class="hljs-string">&apos;degree&apos;</span>] = <span class="hljs-number">0</span></code></pre>
<p>Finally, we use the <code>triple_apply</code> method to apply the function to all of the
edges (together with their incident source and destination vertices). This
method requires specification of which fields are allowed to be changed by the
our function.</p><pre><code class="lang-python">g = g.triple_apply(increment_degree, mutated_fields=[<span class="hljs-string">&apos;degree&apos;</span>])
<span class="hljs-keyword">print</span> g.vertices.sort(<span class="hljs-string">&apos;degree&apos;</span>, ascending=<span class="hljs-keyword">False</span>)</code></pre>
<pre><code class="lang-no-highlight">+----------------+--------+--------+-----------------+---------+
|      __id      | degree | gender | license_to_kill | villain |
+----------------+--------+--------+-----------------+---------+
|   James Bond   |   8    |   M    |        1        |    0    |
| Elliot Carver  |   7    |   M    |        0        |    1    |
|       M        |   6    |   M    |        1        |    0    |
|   Moneypenny   |   4    |   F    |        1        |    0    |
|       Q        |   4    |   M    |        1        |    0    |
|  Paris Carver  |   3    |   F    |        0        |    1    |
| Inga Bergstorm |   2    |   F    |        0        |    0    |
|  Henry Gupta   |   2    |   M    |        0        |    1    |
|    Wai Lin     |   2    |   F    |        1        |    0    |
|   Gotz Otto    |   2    |   M    |        0        |    1    |
+----------------+--------+--------+-----------------+---------+
[10 rows x 5 columns]</code></pre>
<p>James Bond is quite the popular guy!</p><p>To learn more, check out the <a href="../graph_analytics/">graph analytics toolkits</a>, the
<a href="https://apple.github.io/turicreate/docs/api/generated/turicreate.SGraph.html" target="_blank">API Reference</a>
for SGraphs.</p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../data_formats_and_sources/sql_integration.html" class="navigation navigation-prev " aria-label="Previous page: SQL Databases">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../text/analysis.html" class="navigation navigation-next " aria-label="Next page: Text data">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Graph data","level":"1.2.2","depth":2,"next":{"title":"Text data","level":"1.2.3","depth":2,"path":"text/analysis.md","ref":"text/analysis.md","articles":[]},"previous":{"title":"SQL Databases","level":"1.2.1.3","depth":3,"path":"data_formats_and_sources/sql_integration.md","ref":"data_formats_and_sources/sql_integration.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"3.2.0","theme":"default","variables":{},"plugins":["collapsible-menu@1.0.2","anchors@0.5.0","mathjax"],"pluginsConfig":{"collapsible-menu":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"fontSettings":{"theme":"white","family":"sans","size":2},"highlight":{},"mathjax":{"forceSVG":false,"version":"2.6-latest"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"sgraph/sgraph.md","mtime":"2018-07-12T18:15:35.789Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2019-04-11T18:53:55.756Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

